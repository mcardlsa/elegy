<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_alter_tables extends CI_Migration {

	public function up()
	{
		$message_fields = array(
			'orderInfo' => array('name' => 'productId', 'type' => 'int')
		);
		$this->dbforge->modify_column('messages', $message_fields);
		
		$dog_parks_fields = array(
                        'deleted' => array('type' => 'tinyint')
        );
		$this->dbforge->add_column('dog_parks', $dog_parks_fields);
		
		$drop_key_sql = 'ALTER TABLE wishlists DROP FOREIGN KEY wishlists_ibfk_3;';
		$this->db->query($drop_key_sql);
		

		$wishlist_fields = array(
			'productId' => array('name' => 'objectId', 'type' => 'int')
		);
		$this->dbforge->modify_column('wishlists', $wishlist_fields);
	}

	public function down()
	{
		$message_fields = array(
			'productId' => array('name' => 'orderInfo', 'type' => 'varchar', 'constraint' => '255')
		);
		$this->dbforge->modify_column('messages', $message_fields);
		$this->dbforge->drop_column('dog_parks', 'deleted');
		
		$wishlist_fields = array(
			'objectId' => array('name' => 'productId', 'type' => 'int')
		);
		$this->dbforge->modify_column('wishlists', $wishlist_fields);
	}

}