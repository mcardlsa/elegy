   

<script src="http://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=places&key=AIzaSyDPwO4rEm_h3TgaQw_89bMzs8JCHDesWZg" type="text/javascript"></script>
<script>
		
var placeSearch, autocomplete;
var componentForm = {
	  //street_number: 'short_name',
	  route: 'long_name',
	  locality: 'long_name',
	  administrative_area_level_1: 'long_name',
	  country: 'long_name',
	  postal_code: 'short_name'
	};
		

function initialize() {
  // Create the autocomplete object, restricting the search
  // to geographical location types.
  autocomplete = new google.maps.places.Autocomplete(
      /** @type {HTMLInputElement} */(document.getElementById('autocomplete')));
  // When the user selects an address from the dropdown,
  // populate the address fields in the form.
  google.maps.event.addListener(autocomplete, 'place_changed', function() {
    fillInAddress();
  });

  google.maps.event.addListener(autocomplete, 'place_changed', function() {
	// 
	infowindow.close();
    marker.setVisible(false);
    var place = autocomplete.getPlace();
    if (!place.geometry) {
      window.alert("Autocomplete's returned place contains no geometry");
      return;
    }

    // If the place has a geometry, then present it on a map.
    if (place.geometry.viewport) {
      map.fitBounds(place.geometry.viewport);
    } else {
      map.setCenter(place.geometry.location);
      map.setZoom(17);  // Why 17? Because it looks good.
    }
    marker.setIcon(/** @type {google.maps.Icon} */({
      url: place.icon,
      size: new google.maps.Size(71, 71),
      origin: new google.maps.Point(0, 0),
      anchor: new google.maps.Point(17, 34),
      scaledSize: new google.maps.Size(35, 35)
    }));
    marker.setPosition(place.geometry.location);
    marker.setVisible(true);
	var place = autocomplete.getPlace();
	var latitude = place.geometry.location.lat();
	var longitude = place.geometry.location.lng();  
	$('#us3-lat').val(latitude);
	$('#us3-lon').val(longitude);
	
    var address = '';
    if (place.address_components) {
      address = [
        (place.address_components[0] && place.address_components[0].short_name || ''),
        (place.address_components[1] && place.address_components[1].short_name || ''),
        (place.address_components[2] && place.address_components[2].short_name || '')
      ].join(' ');
    }

    infowindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);
    infowindow.open(map, marker);
    fillInAddress();
  });
  
  // Sets a listener on a radio button to change the filter type on Places
  // Autocomplete.
  function setupClickListener(id, types) {
    var radioButton = document.getElementById(id);
    google.maps.event.addDomListener(radioButton, 'click', function() {
      autocomplete.setTypes(types);
    });
  }
  
//[START region_fillform]
  function fillInAddress() {

	
	// Get the place details from the autocomplete object.
    var place = autocomplete.getPlace();
	 document.getElementById("search_lat").value = place.geometry.location.lat();
	 document.getElementById("search_lng").value = place.geometry.location.lng();
    for (var component in componentForm) {
        document.getElementById(component).value = '';
		document.getElementById(component).disabled = false;
    }
	$('#autocomplete').val(place.name);
    // Get each component of the address from the place details
    // and fill the corresponding field on the form.
    for (var i = 0; i < place.address_components.length; i++) {
      var addressType = place.address_components[i].types[0];
      if (componentForm[addressType]) {
        var val = place.address_components[i][componentForm[addressType]];
		document.getElementById(addressType).value = val;
      }
    }
  }
  // [END region_fillform]
  
  setupClickListener('changetype-all', []);
  setupClickListener('changetype-address', ['address']);
  setupClickListener('changetype-establishment', ['establishment']);
  setupClickListener('changetype-geocode', ['geocode']);
}
  
window.onload = function() {
  initialize();
};
</script>
	   <div id="page-content-wrapper"> 
		<div class="page-content inset main_page">
          <div class="row">
              <div class="col-md-12">
                <div class="main_header">
				<h4 class="pull-left"><?php echo $title;?></h4>
				</div>	
			    <div class="clearfix"></div>
                <div class="main_content_section">
               
             <?php if(isset($advertisements) && !empty($advertisements))   ?>            

			   <?php echo form_open_multipart('advertisements/edit_advertisement/'.$advertisements['0']['advertisementId'], array("class" => "form-horizontal"));?>       
		 		
                  <?php echo form_hidden(array('advertisementId'=> set_value('advertisementId',$advertisements['0']['advertisementId']) ));
				 ?>               
				<ul class="form-list"> 
				<li>   
				<span>
				<?php echo form_label('Company Name <em style="color:red; padding-right:10px;">*</em>', "companyName", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'companyName', 'class' => 'form-control','value'=> set_value('companyName',$advertisements['0']['companyName'])));
				echo form_error('companyName'); ?></div>
				</li>
				
				<li>   
				<span><?php echo form_label('Advertisement Image <em style="color:red; padding-right:10px;">*</em>', "advertisementImage", array("class" => "control-label")); ?><?php echo "<br>" ?> <?php echo "( jpg, jpeg, png, gif)";?></span>
				<div>
				<?php echo form_upload(array("name" => "advertisementImage", "class" => "form-control",'id'=>'advertisementImage')); ?>	
				<?php echo isset($file_upload_error) ? $file_upload_error : '';?>
             	<img src="<?php echo base_url().$advertisements['0']['advertisementImage']; ?>" height="80px" width="100px" />
				<?php echo form_error('advertisementImage'); ?>
				</div>
				</li>
				
				<li>	
				<span>
				<?php echo form_label('Target Zipcode<em style="color:red; padding-right:10px;">*</em>',"breed", array("class" => " control-label"));?></span>
				<div><?php echo form_input(array('name'=> 'targetZipcode', 'class' => 'form-control','value'=> set_value('targetZipcode',$targetZipcode)));
				echo form_error('targetZipcode'); ?>
			    </div>
				</li>
				<li>    
				<div style="margin-left:16%; margin-top:-3px;"> <?php echo ("Note: Enter a comma separated list");?></div></li>	
				<li>   
				<span>
				<?php echo form_label(' Company Address <em style="color:red; padding-right:10px;">*</em>', "companyAddress", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'companyAddress', 'class' => 'form-control','id' =>'autocomplete','value'=> set_value('companyAddress',$advertisements['0']['companyAddress'])));
				echo form_error('companyAddress'); ?></div>
				</li>
		       
			    <li>	
				<span>
				<?php echo form_label('Street<em style="color:red; padding-right:10px;">*</em>',"street", array("class" => " control-label"));?></span>
				<div><?php echo form_input(array('name'=> 'street', 'class' => 'form-control','id' =>'route','value'=> set_value('street',$advertisements['0']['street'])));
				echo form_error('street'); ?>
			    </div>
				<li>	
				
				<li>   
				<span>
				<?php echo form_label(' City <em style="color:red; padding-right:10px;">*</em>', "city", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'city', 'class' => 'form-control','id' =>'locality','value'=> set_value('city',$advertisements['0']['city'])));
				echo form_error('city'); ?></div>
				</li>
				
				<li>   
				<span>
				<?php echo form_label(' State <em style="color:red; padding-right:10px;">*</em>', "state", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'state','id' =>'administrative_area_level_1', 'class' => 'form-control','value'=> set_value('state',$advertisements['0']['state'])));
				echo form_error('state'); ?></div>
				</li>
				
				<li>   
				<span>
				<?php echo form_label(' Country<em style="color:red; padding-right:10px;">*</em>', "country", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'country','id' =>'country', 'class' => 'form-control','value'=> set_value('country',$advertisements['0']['country'])));
				echo form_error('country'); ?></div>
				</li>
				
				<li>   
				<span>
				<?php echo form_label(' Zipcode <em style="color:red; padding-right:10px;">*</em>', "zipcode", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'zipcode', 'class' => 'form-control','id' =>'postal_code','value'=> set_value('zipcode',$advertisements['0']['zipcode'])));
				echo form_error('zipcode'); ?></div>
				</li>
				
				<li>   
				<span>
				<?php echo form_label('Advertisement LinkUrl <em style="color:red; padding-right:10px;">*</em>', "linkUrl", array("class" => "control-label")); ?></span>
				<div><?php echo form_input(array('name'=> 'linkUrl', 'class' => 'form-control','value'=> set_value('linkUrl',$advertisements['0']['linkUrl'])));
				echo form_error('linkUrl'); ?></div>
				</li>
                
				<input type="hidden" name="lat" id="search_lat" value="<?php echo $advertisements['0']['latitude'] ?>"/>
                <input type="hidden" name="lng" id="search_lng" value="<?php echo $advertisements['0']['longitude'] ?>"/>
     			 
					  <span>&nbsp;</span>
                <?php echo form_submit(Array ("name" => "mysubmit", "value" => "Update", "class" => "button1")); ?>
                <?php echo form_input(array ("name" => "Cancel", "type" => "button", "value" => "Cancel", "class" => "button1","onclick"=>"goBack();")); ?>
				</li>
				</ul>	
					<?php echo form_close(); ?>
			   </div>
            </div>
          </div>
        </div>
      </div>		
                 
<script>
function goBack() {
    window.history.back()
}
</script>				
